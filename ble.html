<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
  </head>
  <body>
    <form>
      <button>Connect with BLE device</button>
    </form>

    <script>

      function isWebBLEAvailable() {

        if ( navigator.bluetooth )
          return true;

        console.log( 'Web Bluetooth is not available' )
        return false;

      }

      function getDeviceInfo() {

        let options = {
          acceptAllDevices : true
          // filters : [
          //   {
          //     services : [ '00001101-0000-1000-8000-00805f9b34fb' ]
          //   }
          // ]
        }

        console.log( 'Requesting BLE infoâ€¦' );

        navigator.bluetooth.requestDevice( options ).then( device => {

          console.log( device )

        } ).catch( error => {

          console.log( error )

        } )

      }

      document.querySelector( 'form' ).addEventListener( 'submit', function( event ) {
        event.stopPropagation();
        event.preventDefault();

        if ( isWebBLEAvailable() ) {

          getDeviceInfo();

        }

      } )

    </script>

  </body>
</html>
